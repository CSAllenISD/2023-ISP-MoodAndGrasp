{% extends "home/base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}
<h1>Slider Form</h1>
  {% for question in mood_questions %}
  <div class="content">
    <div class="form-group row">
      <label class="col-md-4 col-form-label">{{ question.question }}</label>
      <div class="col-md-8">
        <div class="slider-container">
          <input type="range" min="1" max="5" value="3" class="slider" id="mood_{{ forloop.counter }}">
          <div class="slider-images-container">
            <img class="slider-image" src="{% static question.emoji_1 %}" width="50" height="50" data-position="1"
              style="left:-50px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_2 %}" width="50" height="50" data-position="2"
              style="left:25px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_3 %}" width="50" height="50" data-position="3"
              style="left:100px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_4 %}" width="50" height="50" data-position="4"
              style="left:175px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_5 %}" width="50" height="50" data-position="5"
              style="left:250px; top:1px;">
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}

  {% for question in grasp_questions %}
  <div class="content">
    <div class="form-group row">
      <label class="col-md-4 col-form-label">{{ question.question }}</label>
      <div class="col-md-8">
        <div class="slider-container">
          <input type="range" min="1" max="5" value="3" class="slider" id="grasp_{{ forloop.counter }}">
          <div class="slider-images-container">
            <img class="slider-image" src="{% static question.emoji_1 %}" width="50" height="50" data-position="1"
              style="left:-50px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_2 %}" width="50" height="50" data-position="2"
              style="left:25px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_3 %}" width="50" height="50" data-position="3"
              style="left:100px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_4 %}" width="50" height="50" data-position="4"
              style="left:175px; top:1px;">
            <img class="slider-image" src="{% static question.emoji_5 %}" width="50" height="50" data-position="5"
              style="left:250px; top:1px;">
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  <button class="btn btn-outline-info" onclick="redirect()">Submit</button>
<div id="slider-value"></div>
<script type="text/javascript">
  let moodValue = 0;
  let graspValue = 0;
  var valueTotal = 0;
  function sliderVal(value) {
    switch(value) {
      case "1":
        valueTotal = 0;
        break;
      case "2":
        valueTotal = 1;
        break;
      case "3":
        valueTotal = 2;
        break;
      case "4":
        valueTotal = 3;
        break;
      case "5":
        valueTotal = 4;
        break;
    }
      return valueTotal
    
  }
  function redirect() {

    mood_q1 = document.getElementById("mood_1");
    mood_q2 = document.getElementById("mood_2");
    mood_q3 = document.getElementById("mood_3");
    mood_q4 = document.getElementById("mood_4");

    grasp_q1 = document.getElementById("grasp_1");
    grasp_q2 = document.getElementById("grasp_2");
    grasp_q3 = document.getElementById("grasp_3");
    grasp_q4 = document.getElementById("grasp_4");
    var moodTotal = 0;
    var graspTotal = 0;

    moodTotal = sliderVal(mood_q1.value) + sliderVal(mood_q2.value) + sliderVal(mood_q3.value) + sliderVal(mood_q4.value); 
    graspTotal = sliderVal(grasp_q1.value) + sliderVal(grasp_q2.value) + sliderVal(grasp_q3.value) + sliderVal(grasp_q4.value);
    surveyRedirect = "/surveySubmit/(" + parseInt(moodTotal) + ")-(" + parseInt(graspTotal) + ")";
    location.href = surveyRedirect;

  }


</script>
{% endblock %}